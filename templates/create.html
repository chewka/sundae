{% extends 'base.html' %}

{% block title %}
Host an event!
{% endblock %}

</head>

  <body class="mdl-demo mdl-color--grey-100 mdl-color-text--grey-700 mdl-base">
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <header class="mdl-layout__header mdl-layout__header--scroll mdl-color--primary">
        <div class="mdl-layout--large-screen-only mdl-layout__header-row">
        </div>
        <div class="mdl-layout--large-screen-only mdl-layout__header-row">
          <h3>üç® sundae socials</h3>
        </div>
        <div class="mdl-layout--large-screen-only mdl-layout__header-row">
        </div>
        <div class="mdl-layout__tab-bar mdl-js-ripple-effect mdl-color--primary-dark">
          <a href="/" class="mdl-layout__tab">üè† home</a>
          <a href="/create" class="mdl-layout__tab is-active">‚úçÔ∏è create</a>
          <a href="/socials" class="mdl-layout__tab">üë• socials</a>
          <a href="/venues" class="mdl-layout__tab">venues</a>
          <a href="/me" class="mdl-layout__tab">üë§ me</a>
          {% if 'user_id' in session %}
          <a href="/exit" class="mdl-layout__tab">üë£ exit</a>
          {% else %}
          <a href="/join" class="mdl-layout__tab">üï∂Ô∏è VIP</a>
          {% endif %}
          <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-shadow--4dp mdl-color--accent" id="add" onclick="window.location='/create';">
            <i class="material-icons" role="presentation">add</i>
            <span class="visuallyhidden">Add</span>
          </button>
        </div>
      </header>
      <main class="mdl-layout__content">
        <div class="mdl-layout__tab-panel is-active" id="overview">
            </header>


{% block styles %}
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue-pink.min.css">
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<style>
  .getmdl-select{outline:none}.getmdl-select .mdl-textfield__input{cursor:pointer}.getmdl-select .selected{background-color:#ddd}.getmdl-select .mdl-icon-toggle__label{float:right;margin-top:-30px;color:rgba(0,0,0,0.4);transform:rotate(0);transition:transform 0.3s}.getmdl-select.is-focused .mdl-icon-toggle__label{color:#3f51b5;transform:rotate(180deg)}.getmdl-select .mdl-menu__container{width:100% !important;margin-top:2px}.getmdl-select .mdl-menu__container .mdl-menu{width:100%}.getmdl-select .mdl-menu__container .mdl-menu .mdl-menu__item{font-size:16px}.getmdl-select__fix-height .mdl-menu__container .mdl-menu{overflow-y:auto;max-height:288px !important}.getmdl-select__fix-height .mdl-menu.mdl-menu--top-left{bottom:auto;top:0}

  h1, h2, h3, h4, h5 {
    font-family: 'Libre Baskerville', serif;
  }

  .mdl-card__supporting-text {
    width: 50%
  }
</style>
{% endblock %}

{% block scripts %}
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>

<script>
$( function() {
  $( '.datepicker').datepicker();
      format: "yyyy-mm-dd"
} );

$('.timepicker').timepicker({
    timeFormat: 'hh:mm p',
    interval: 30,
    dropdown: true,
    scrollbar: true
});

$(function() {
				$('#begin_at').timepicker();
        $('#end_at').timepicker();
			});

      "use strict";!function(){function e(){getmdlSelect.init(".getmdl-select")}window.addEventListener?window.addEventListener("load",e,!1):window.attachEvent&&window.attachEvent("onload",e)}();var getmdlSelect={_defaultValue:{width:300},_addEventListeners:function(e){var t=e.querySelector("input"),n=e.querySelector('input[type="hidden"]'),l=e.querySelectorAll("li"),a=e.querySelector(".mdl-js-menu"),o=e.querySelector(".mdl-icon-toggle__label"),i="",c="",s="",u=!1,d=function(o){var i=o.textContent.trim();if(t.value=i,l.forEach(function(e){e.classList.remove("selected")}),o.classList.add("selected"),e.MaterialTextfield.change(i),setTimeout(function(){e.MaterialTextfield.updateClasses_()},250),n.value=o.dataset.val||"",c=t.value,s=n.value,"createEvent"in document){var u=document.createEvent("HTMLEvents");u.initEvent("change",!1,!0),a.MaterialMenu.hide(),t.dispatchEvent(u)}else t.fireEvent("onchange")},r=function(){u=!1,t.value=c,n.value=s,e.querySelector(".mdl-menu__container").classList.contains("is-visible")||e.classList.remove("is-focused");var l=document.querySelectorAll(".getmdl-select .mdl-js-menu");[].forEach.call(l,function(e){e.MaterialMenu.hide()});var o=new Event("closeSelect");a.dispatchEvent(o)};document.body.addEventListener("click",r,!1),e.onkeydown=function(l){9==l.keyCode&&(t.value=c,n.value=s,a.MaterialMenu.hide(),e.classList.remove("is-focused"))},t.onfocus=function(e){a.MaterialMenu.show(),a.focus(),u=!0},t.onblur=function(e){e.stopPropagation()},t.onclick=function(t){t.stopPropagation(),a.classList.contains("is-visible")?(a.MaterialMenu.hide(),u=!1):(a.MaterialMenu.show(),r(),e.classList.add("is-focused"),u=!0)},t.onkeydown=function(l){27==l.keyCode&&(t.value=c,n.value=s,a.MaterialMenu.hide(),e.MaterialTextfield.onBlur_(),""!==i&&(e.querySelector(".mdl-textfield__label").textContent=i,i=""))},a.addEventListener("closeSelect",function(l){t.value=c,n.value=s,e.classList.remove("is-focused"),""!==i&&(e.querySelector(".mdl-textfield__label").textContent=i,i="")}),a.onkeydown=function(l){27==l.keyCode&&(t.value=c,n.value=s,e.classList.remove("is-focused"),""!==i&&(e.querySelector(".mdl-textfield__label").textContent=i,i=""))},o&&(o.onclick=function(l){l.stopPropagation(),u?(a.MaterialMenu.hide(),u=!1,e.classList.remove("is-focused"),e.MaterialTextfield.onBlur_(),t.value=c,n.value=s):(r(),e.MaterialTextfield.onFocus_(),t.focus(),a.MaterialMenu.show(),u=!0)}),[].forEach.call(l,function(n){n.onfocus=function(){e.classList.add("is-focused");var l=n.textContent.trim();t.value=l,e.classList.contains("mdl-textfield--floating-label")||""!=i||(i=e.querySelector(".mdl-textfield__label").textContent.trim(),e.querySelector(".mdl-textfield__label").textContent="")},n.onclick=function(){d(n)},n.dataset.selected&&d(n)})},init:function(e){var t=document.querySelectorAll(e);[].forEach.call(t,function(e){getmdlSelect._addEventListeners(e),componentHandler.upgradeElement(e),componentHandler.upgradeElement(e.querySelector("ul"))})}};

</script>
{% endblock %}

<div id="flash">
{% for flash in get_flashed_messages() %}
  {{ flash }}
{% endfor %}
</div>

{% block content %}
<body class="mdl-demo mdl-color--grey-100 mdl-color-text--grey-700 mdl-base">
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
    <header class="mdl-layout__header mdl-layout__header--scroll mdl-color--primary">
      <div class="mdl-layout--large-screen-only mdl-layout__header-row">
      </div>
      <div class="mdl-layout--large-screen-only mdl-layout__header-row">
        <h3>üç® sundae socials</h3>
      </div>
      <div class="mdl-layout--large-screen-only mdl-layout__header-row">
      </div>
      <div class="mdl-layout__tab-bar mdl-js-ripple-effect mdl-color--primary-dark">
        <a href="/" class="mdl-layout__tab">üè† home</a>
        <a href="/create" class="mdl-layout__tab is-active">‚úçÔ∏è create</a>
        <a href="/socials" class="mdl-layout__tab">üë• socials</a>
        <a href="/venues" class="mdl-layout__tab">üåê venues</a>
        <a href="/me" class="mdl-layout__tab">üë§ me</a>
        {% if 'user_id' in session %}
        <a href="/exit" class="mdl-layout__tab">üëã exit</a>
        {% else %}
        <a href="/join" class="mdl-layout__tab">üï∂Ô∏è VIP</a>
        {% endif %}
        <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-shadow--4dp mdl-color--accent" id="add" onclick="window.location='/create';">
          <i class="material-icons" role="presentation">add</i>
          <span class="visuallyhidden">Add</span>
        </button>
      </div>
    </header>
    <main class="mdl-layout__content">
      <div class="mdl-layout__tab-panel is-active" id="overview">
    </header>

<div class="container">

<section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--1dp">
<div class="mdl-card mdl-cell mdl-cell--6-col">
  <div class="mdl-card__supporting-text">
  <h4>Create your event!</h4>
  <h6>&#x266B; let's party &#x266A; &#x266C; </h6>

<div class="mdl-grid">
<div class="mdl-cell mdl-cell--4-col">
  <form action="/create" method="POST">
    <table>
      <tr>
        <td>
          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
            <input class="mdl-textfield__input" type="text" name="title" id="title">
            <label class="mdl-textfield__label" for="title">title</label>
          </div>
        </td>
      </tr>

      <tr>
        <td>
          <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="option-1">
            <input type="radio" id="option-1" class="mdl-radio__button" name="private" value="False" checked>
            <span class="mdl-radio__label">public</span>
          </label>
        </td>
      </tr>

      <tr>
        <td>
          <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="option-2">
            <input type="radio" id="option-2" class="mdl-radio__button" name="private" value="True">
            <span class="mdl-radio__label">private</span>
          </label>
        </td>
      </tr>

      <tr>
        <td>
          <div class="mdl-textfield mdl-js-textfield getmdl-select">
              <input type="text" value="" class="mdl-textfield__input" id="create-venue" name="venue" readonly>
              <input type="hidden" value="" name="create-venue">
              <i class="mdl-icon-toggle__label material-icons">keyboard_arrow_down</i>
              <label for="sample2" class="mdl-textfield__label">venue</label>
                <ul for="sample2" class="mdl-menu mdl-menu--bottom-left mdl-js-menu">
                    {% for venue in venues %}
                    <li class="mdl-menu__item" data-val="{{ venue.name }}">{{ venue.name }}</li>
                    {% endfor %}
                </ul>
            </div>
        </td>
      </tr>

      <tr>
        <td>
          <div class="mdl-textfield mdl-js-textfield">
            <textarea class="mdl-textfield__input" type="text" rows= "3" id="create-info" name="info"></textarea>
            <label class="mdl-textfield__label" for="create-info">event description</label>
          </div>
        </td>
      </tr>

      <tr>
        <td>&nbsp;
        </td>
      </tr>

      <tr>
        <td>begins at: <input type="text" name="begin_time" class="timepicker" id="begin_at" required>
        </td>
      </tr>
      <tr>
        <td>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on: <input type="text" name="begin_date" class="datepicker" required>
        </td>
      </tr>

      <tr>
        <td>&nbsp;
        </td>
      </tr>

      <tr>
        <td>
          &nbsp;&nbsp;ends at: <input type="text" name="end_time"  id="end_at" required>
        </td>
      </tr>
      <tr>
        <td>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on: <input type="text" name="end_date" class="datepicker" required>
        </td>
      </tr>

      <tr>
        <td>
          &nbsp;
        </td>
      </tr>

	    <tr>
		    <td>
          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
            <input class="mdl-textfield__input" type="text" name="url" id="url">
            <label class="mdl-textfield__label" for="url">custom url</label>
          </div>
        </td>
	    </tr>
      <tr>
        <td>
          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
            <input class="mdl-textfield__input" type="text" pattern="-?[0-9]*(\.[0-9]+)?" name="max_cap" id="max_cap">
            <label class="mdl-textfield__label" for="max_cap">max invites</label>
          </div>
        </td>
      <tr>
        <td>
          &nbsp;
        </td>
      </tr>

      </tr>
      <tr>
        <td>
          <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent" type="submit">get social</button>
        </td>
      </tr>
    </table>
  </form>
</div>
</div>
</div>
</main>
{% endblock %}

<!-- <script type="text/javascript">

$('#create').on('submit', function (evt) {
      evt.preventDefault();
      let url = $('#url').text();
      $.get('/verify_url', {'url':url}, function (data) {
          if(data == 'True') {
            // url is unique
            // submit form
          }
          else {
            // data is not unique, alert user for another name
          }
        }
});

</script> -->
